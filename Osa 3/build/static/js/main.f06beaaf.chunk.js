(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),u=t(15),a=t.n(u),r=t(6),o=t(3),i=t(0),s=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(i.jsxs)("div",{children:["Filter shown with ",Object(i.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.addPerson,t=e.newName,c=e.handleNameChange,u=e.newNumber,a=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:["Name: ",Object(i.jsx)("input",{value:t,onChange:c})]}),Object(i.jsxs)("div",{children:["Number: ",Object(i.jsx)("input",{value:u,onChange:a})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.name,t=e.number,c=e.deleteButton;return Object(i.jsxs)("div",{children:[n," ",t," ",Object(i.jsx)("button",{onClick:c,children:"Delete"})]})},b=function(e){var n=e.filteredPersons,t=e.deleteButton;return n.map((function(e){return Object(i.jsx)(d,{name:e.name,number:e.number,deleteButton:function(){return t(e.id)}},e.name)}))},j=function(e){var n=e.message,t=e.status;return null===n?null:Object(i.jsx)("div",{className:t,children:n})},f=t(4),h=t.n(f),m="api/persons",O=function(){return h.a.get(m).then((function(e){return e.data}))},v=function(e){return h.a.post(m,e).then((function(e){return e.data}))},x=function(e){return h()({method:"DELETE",url:m+"/"+e}).then((function(e){return e.data}))},p=function(e,n){return h.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},g=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],a=Object(c.useState)(""),d=Object(o.a)(a,2),f=d[0],h=d[1],m=Object(c.useState)(""),g=Object(o.a)(m,2),w=g[0],C=g[1],N=Object(c.useState)(""),E=Object(o.a)(N,2),S=E[0],y=E[1],T=Object(c.useState)([]),k=Object(o.a)(T,2),B=k[0],F=k[1],P=Object(c.useState)(null),D=Object(o.a)(P,2),L=D[0],J=D[1],A=Object(c.useState)(""),I=Object(o.a)(A,2),R=I[0],q=I[1];Object(c.useEffect)((function(){O().then((function(e){u(e)}))}),[]),Object(c.useEffect)((function(){F(t)}),[t]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{message:L,status:R}),Object(i.jsx)(s,{newFilter:S,handleFilterChange:function(e){y(e.target.value),F(t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())})))}}),Object(i.jsx)("h2",{children:"Add new"}),Object(i.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:f,number:w};if(t.find((function(e){return e.name===n.name}))){if(window.confirm("".concat(f," is already added to phonebook, replace old number with a new one?"))){var c=t.find((function(e){return e.name===n.name})),a=Object(r.a)(Object(r.a)({},c),{},{number:w});p(c.id,a).then((function(e){u(t.map((function(n){return n.id!==c.id?n:e}))),J("".concat(f," has been updated")),q("success"),setTimeout((function(){J(null)}),3e3)})).catch((function(e){console.log("Error: ",e),J("".concat(f," has already been deleted")),q("error"),setTimeout((function(){J(null)}),3e3)}))}}else v(n).then((function(e){u(t.concat(e))})),J("".concat(f," has been added")),q("success"),setTimeout((function(){J(null)}),3e3);h(""),C("")},newName:f,handleNameChange:function(e){h(e.target.value)},newNumber:w,handleNumberChange:function(e){C(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(b,{filteredPersons:B,deleteButton:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Really delete "+n+"?")&&x(e).then((function(c){u(t.filter((function(n){return n.id!==e}))),J("".concat(n," has been deleted")),q("success"),setTimeout((function(){J(null)}),3e3)})).catch((function(e){console.log("Error: ",e),J("".concat(f," has already been deleted")),q("error"),setTimeout((function(){J(null)}),3e3)}))}})]})};t(39);a.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f06beaaf.chunk.js.map